# 一、大数据框架

1、kafka消息队列实现原理



2、都说kafka有高吞吐，那说说影响kafka高吞吐的因素有哪些

​	（1）写

			* Kafka会根据时间或者文件大小来存储数据，他在往磁盘上写的时候，是一直往一个文件里顺序添加，减少了寻址时间，提高写的效率。

​	（2）读

+ Kafka的消费者可以有多个，当多个消费者处于同一个组下，是可以共同消费一个topic的，通过增加消费者的方式来提高吞吐。

+ Kafka允许对数据进行压缩，可以减少IO消耗。

  

3、kafka源码看过吗



4、使用kafka的api消费kafka的时候，如果有一个消费者挂掉了，这个时候kafka会怎么处理

如果有多个消费者的情况下，由挂掉消费者负责的分区会重新平衡到其他的消费者身上。



# 二、Java部分

1、java的集合类都用过哪些

List Set Map

2、ArrayList和LinkedList的应用场景

* 由于ArrayList是使用数组实现的，如果这个数组读的多，写的少，就可以用ArrayList。

* LinkedList则是底层的数据结构是一个双向链表，如果是写多读少，就可以用LinkedList。

  

3、ArrayList和LinkedList的添加和删除的过程（源码实现）

* ArrayList 
  * 添加
    * 添加元素
      * 因为是一个数组，所以就直接将元素添加到当前数组的末尾就好了
    * 扩容
      * 一开始创建对象的时候，实际上是创建了一个长度为0的空数组，当添加第一个元素的时候才会扩容，另外，当数组满了，还要添加元素，那么也会扩容
      * 如果是第一次添加元素的时候扩容，那么数组的是在10的基础上进行扩容，否则就是在当前size+要添加的元素个数的基础上进行扩容，具体的扩容流程是，先直接在老的数组长度上增长两倍，如果发现增长完之后还是小于需要的数组长度，则将需要的数组长度变为新的数组长度。如果发现新的数组长度比默认最大的数组长度还要大(Interger.MAX_VAUE - 8)，则将新的数组长度修改为Integer的最大值,之后创建一个新的数组，将老的数组的值复制过去。底层是native方法。
  * 删除
    * 如果是按照索引删除，那么直接利用native方法将这个元素之后的元素往前移动一位，之后将最后一个元素置空
    * 如果是按照值删除，就线性遍历数组，找到元素索引（寻找的），然后按照索引删除。
* LinkedList
  * 添加
    * 添加元素
      * 类里面有一个变量，是用来记录最后一个节点的位置的，所以不用遍历，直接将新的节点连接在末尾
    * 删除
      * LinkedList不是数组，什么参数都没有就直接删除第一个元素
      * 如果是按照索引删除，由于链表没有记录索引，所以会找到第这个索引的元素（二分法），然后删除找到的节点。
      * 如果按照值删除，是直接线性遍历，找到该值得节点，然后删除。



4、诸如ArrayList和LinkedList等集合是否是线程安全的

不是线程安全的



5、JUC中线程安全的集合是怎么做到线程安全的

是采用lock锁加写入时复制。

+ Lock锁原理
+ 写入时复制
  + 当要写入的时候，会将数组复制一份，向复制的这份写，写完之后复制回去。



6、多线程去操作共享资源时会发生什么样的问题，怎样解决，例如 有一个数字0，多线程操作这个数字去+1，一直加到100，会发生怎样的问题，怎么解决？

* 当多个线程去给他+1的时候，如果不考虑线程安全会出现可能加出来的值小于100
* 解决：
  * 给操作这个代码上锁
  * 使用原子引用



# 三、JavaEE部分

1、你们的项目是怎么做的负载均衡

使用腾讯提供的服务clb类似于nginx来做负载



2、负载均衡的时候是怎么保存登陆状态的

可以使用外部的数据库，比如说redis存储session之类的信息。



# 四、数据库

1、mysql数据库为什么会设置自增索引，有什么用

+ 在innodb引擎下，使用的是B+树进行数据存储，这种存储在顺序上符合二叉排序树的特点，所以当新增数据的时候，如果有自增索引，则直接在树的最右边添加即可，不用挪动其他数据。



2、mysql的索引在什么样的情况下会失效

	* 当where子句里有null值判断时
	* 当where自句里有!=,<,>这样的判断
	* where子句中有or条件，如果字段没有全部加索引， 那么就不会走索引
	* 当数据类型是int，并且要查询多个条件的数据，不要用in 比如说in(1,2)
	* 联合索引的使用必须要包含联合索引的第一个字段，索引才会生效

# 五、项目

1、你们的实时数仓最后吐出的是什么数据？直接就是结果？